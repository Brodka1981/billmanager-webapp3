<!-- Toast container -->
<div class="toast-container position-fixed top-0 end-0 p-3" aria-live="polite" aria-atomic="true">
  <!-- Toast di SUCCESSO -->
  <div class="toast show bg-success text-white" *ngIf="showSuccessToast">
    <div class="d-flex">
      <div class="toast-body">
        Impostazioni salvate con successo!
      </div>
      <button
        type="button"
        class="btn-close btn-close-white me-2 m-auto"
        (click)="showSuccessToast = false"
      ></button>
    </div>
  </div>

  <!-- Toast di ERRORE -->
  <div class="toast show bg-danger text-white" *ngIf="showErrorToast">
    <div class="d-flex">
      <div class="toast-body">
        Errore: impostazioni non salvate.
      </div>
      <button
        type="button"
        class="btn-close btn-close-white me-2 m-auto"
        (click)="showErrorToast = false"
      ></button>
    </div>
  </div>
</div>

<div class="container my-4">
  <h1 class="text-center mb-4">Impostazioni</h1>

  <div class="row justify-content-center">
    <div class="col-12 col-md-6">
      <form [formGroup]="settingsForm" (ngSubmit)="onSave()" class="needs-validation">

        <!-- Toggle switch con label ben allineata e vicina -->
        <div class="mb-3 d-flex align-items-center">
          <label class="form-check-label fw-semibold mb-0" for="notifyToggle">
            Ricevi una mail che ti avvisi delle bollette scadute
          </label>
          <div class="form-check form-switch ms-3">  <!-- Aggiunto "ms-3" per una spaziatura equilibrata -->
            <input
              class="form-check-input custom-toggle"
              type="checkbox"
              id="notifyToggle"
              formControlName="receiveNotificationsExpiredBills"
            />
          </div>
        </div>

        <!-- Spinner di caricamento quando si salva -->
        <div *ngIf="isSaving" class="text-center mb-2">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Salvataggio in corso...</span>
          </div>
        </div>

        <!-- Pulsanti allineati a destra -->
        <div class="d-flex justify-content-end">
          <button type="submit" class="btn btn-primary me-2" [disabled]="isSaving">Salva Modifiche</button>
          <button type="button" class="btn btn-secondary" [disabled]="isSaving" (click)="onCancel()">Indietro</button>
        </div>

      </form>
    </div>
  </div>
</div>
